<!doctype html>
<html
  lang="en"
  class="page"
>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Title</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="./styles/style.scss"
    />
    <script
      src="./app.js"
      defer
    ></script>
  </head>
  <body class="page__body">
    <header class="header page__header">
      <div class="header__wrapper">
        <div
          id="backdrop"
          class="backdrop"
        ></div>
        <div
          id="dropdown"
          class="header__dropdown header__dropdown--non-visible"
        >
          <a
            href="#"
            class="icon icon--dropdown-close"
          ></a>
          <ul class="header__dropdown-nav">
            <li class="header__dropdown-nav-link-group">
              <ul class="header__dropdown-nav-group">
                <li class="header__dropdown-nav-item">
                  <a
                    href="#"
                    class="header__dropdown-nav-link"
                  >
                    Галерея
                  </a>
                </li>
                <li class="header__dropdown-nav-item">
                  <a
                    href="#events"
                    class="header__dropdown-nav-link"
                  >
                    Виставки та
                    <br />
                    події
                  </a>
                </li>
              </ul>
            </li>
            <li class="header__dropdown-nav-link-group">
              <ul class="header__dropdown-nav-group">
                <li class="header__dropdown-nav-item">
                  <a
                    href="#"
                    class="header__dropdown-nav-link"
                  >
                    Про Нас
                  </a>
                </li>
                <li class="header__dropdown-nav-item">
                  <a
                    href="#"
                    class="header__dropdown-nav-link"
                  >
                    Контакти
                  </a>
                </li>
              </ul>
            </li>
          </ul>
          <hr class="header__dropdown-divider" />
          <section class="header__dropdown-schedule">
            <p class="header__dropdown-schedule-title">Графік роботи</p>
            <div class="header__dropdown-schedule-wrapper">
              <ul class="header__dropdown-schedule-list">
                <li class="header__dropdown-schedule-item">
                  <strong>12:00 — 20:00</strong>
                  середа
                </li>
                <li class="header__dropdown-schedule-item">
                  <strong>12:00 — 20:00</strong>
                  четвер
                </li>
                <li class="header__dropdown-schedule-item">
                  <strong>12:00 — 20:00</strong>
                  п’ятниця
                </li>
                <li class="header__dropdown-schedule-item">
                  <strong>11:00 — 19:00</strong>
                  субота
                </li>
                <li class="header__dropdown-schedule-item">
                  <strong>11:00 — 19:00</strong>
                  неділя
                </li>
              </ul>
              <div class="header__dropdown-schedule-details">
                <p class="header__dropdown-schedule-weekends">
                  <strong>Вихідні:</strong>
                  понеділок, вівторок
                  <br />
                  Каса припиняє роботу за 1 годину до закриття музею
                </p>
              </div>
            </div>
          </section>
        </div>
        <a
          href="#dropdown"
          class="icon icon--dropdown-open"
        ></a>
        <div class="header__container">
          <div class="header__background-container">
            <a
              href="#"
              class="header__logo-link"
            >
              <img
                src="./images/logo.png"
                alt="NAMU Logo"
                class="header__logo-image"
              />
            </a>
            <div class="header__background"></div>
          </div>
          <h1 class="header__title">Художній музей</h1>
          <div class="header__tickets-button-wrapper">
            <a
              href="#"
              class="header__tickets-button"
            >
              <span class="header__tickets-button-text">Квитки</span>
            </a>
            <a
              class="header__events-link"
              href="#events"
            >
              <div class="header__events-link--line"></div>
              <p class="header__events-link--text">Події</p>
            </a>
          </div>
        </div>
      </div>
    </header>

    <main class="main">
      <section
        id="events"
        class="events"
      >
        <h2 class="section-title">Актуальні події</h2>
        <article class="exhibition">
          <a
            href="#"
            class="exhibition__photo exhibition__photo--1"
          ></a>
          <div class="exhibition__content">
            <div class="exhibition__label">
              <p class="exhibition__text">Виставка</p>
              <p class="exhibition__date">26.08-29.11.2019</p>
            </div>
            <h3 class="exhibition__name">Йду і повертаюсь</h3>
            <p class="exhibition__description">
              Національний Художній Музей України презентує унікальну частину
              колекції Градобанку - українське мистецтво другої половини
              1980-1995 років.
            </p>
          </div>
        </article>

        <article class="exhibition">
          <a
            href="#"
            class="exhibition__photo exhibition__photo--2"
          ></a>
          <div class="exhibition__content">
            <div class="exhibition__label">
              <p class="exhibition__text">Виставка</p>
              <p class="exhibition__date">26.08-29.11.2019</p>
            </div>
            <h3 class="exhibition__name">І спогади і мрії</h3>
            <p class="exhibition__description">
              Національний художній музей України до 100 річчя від дня
              народження видатної української художниці Тетяни Яблонської
              відкриває ретроспективну ювілейну виставку «І спогади і мрії».
            </p>
          </div>
        </article>
      </section>

      <section
        id="lection"
        class="lection main__lection"
      >
        <div class="lection__photo"></div>
        <article class="lection__block">
          <div class="lection__content">
            <div class="lection__label">
              <p class="lection__text">Лекція</p>
              <p class="lection__date">26/08/2019 - 11:00</p>
            </div>
            <h3 class="lection__name">
              Від класицизму до
              <br />
              романтизму
            </h3>
          </div>
        </article>
      </section>

      <section id="gallery" class="gallery">
        <h2 class="section-title">Галерея</h2>

        <div class="simple-slider">
          <div class="slider-container">
            <div class="slider-track">
              <div class="slide">
                <img src="./images/gallery-1-mobile.png" alt="Image 1">
              </div>
              <div class="slide">
                <img src="./images/gallery-2-mobile.png" alt="Image 2">
              </div>
              <div class="slide">
                <img src="./images/gallery-3-mobile.png" alt="Image 3">
              </div>
              <div class="slide">
                <img src="./images/gallery-4-mobile.png" alt="Image 4">
              </div>
            </div>
          </div>
          <div class="slider-dots"></div>
        </div>
      </section>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.3.2/swiper-bundle.min.js"></script>
      <script>
document.addEventListener('DOMContentLoaded', () => {
  const sliderTrack = document.querySelector('.slider-track');
  const slides = document.querySelectorAll('.slide');
  const dotsContainer = document.querySelector('.slider-dots');
  let currentIndex = 0;
  let startX = 0;
  let isDragging = false;

  function initSlider() {
    if (window.innerWidth >= 1280) {
      destroySlider();
      return;
    }

    // Recreate dots after every initialization
    createDots();
    updateSliderPosition();
    addEventListeners();
  }

  function destroySlider() {
    dotsContainer.innerHTML = '';
    sliderTrack.style.transform = '';
    removeEventListeners();
  }

  function createDots() {
    dotsContainer.innerHTML = '';
    const slidesToShow = getSlidesToShow();
    const dotsCount = Math.ceil(slides.length / slidesToShow);

    for (let i = 0; i < dotsCount; i++) {
      const dot = document.createElement('div');
      dot.classList.add('dot');
      dot.addEventListener('click', () => goToSlide(i * slidesToShow));
      dotsContainer.appendChild(dot);
    }
    updateDots();
  }

  function getSlidesToShow() {
    return window.innerWidth >= 640 ? 2 : 1;
  }

  function updateDots() {
    const slidesToShow = getSlidesToShow();
    const activeDotIndex = Math.floor(currentIndex / slidesToShow);
    document.querySelectorAll('.dot').forEach((dot, index) => {
      dot.classList.toggle('active', index === activeDotIndex);
    });
  }

  function updateSliderPosition() {
    const slidesToShow = getSlidesToShow();
    const maxIndex = slides.length - slidesToShow;
    currentIndex = Math.min(currentIndex, maxIndex);
    goToSlide(currentIndex);
  }

  function goToSlide(index) {
    const slideWidth = slides[0].clientWidth;
    currentIndex = index;
    sliderTrack.style.transform = `translateX(-${slideWidth * currentIndex}px)`;
    updateDots();
  }

  function handleSwipe(direction) {
    const slidesToShow = getSlidesToShow();
    const maxIndex = slides.length - slidesToShow;

    if (direction === 'left' && currentIndex < maxIndex) {
      currentIndex += slidesToShow;
    } else if (direction === 'right' && currentIndex > 0) {
      currentIndex -= slidesToShow;
    }

    currentIndex = Math.max(0, Math.min(currentIndex, maxIndex));
    goToSlide(currentIndex);
  }

  function addEventListeners() {
    sliderTrack.addEventListener('touchstart', handleTouchStart);
    sliderTrack.addEventListener('touchmove', handleTouchMove);
  }

  function removeEventListeners() {
    sliderTrack.removeEventListener('touchstart', handleTouchStart);
    sliderTrack.removeEventListener('touchmove', handleTouchMove);
  }

  function handleTouchStart(e) {
    if (window.innerWidth >= 1280) return;
    startX = e.touches[0].clientX;
    isDragging = true;
  }

  function handleTouchMove(e) {
    if (window.innerWidth >= 1280 || !isDragging) return;
    const currentX = e.touches[0].clientX;
    const diff = startX - currentX;

    if (Math.abs(diff) > 50) {
      handleSwipe(diff > 0 ? 'left' : 'right');
      isDragging = false;
    }
  }

  window.addEventListener('resize', () => {
    initSlider();
  });

  initSlider();
});
      </script>
      </section>
    </main>
  </body>
</html>
